<div class="ticker-container">
  <!-- Header Row for Titles -->
  <div class="ticker-header">
    <span class="header-title">Name</span>
    <span class="header-title">Action</span>
    <span class="header-title">Amount</span>
  </div>
  <div id="ticker" class="ticker"></div>
</div>

<script>
  const names = [
    "Sibongile", "Thabo", "Jan", "Hendrik", "Emily", "Liam", "Noah", "Aisha", "Lerato", "Chris", 
    "Sarah", "Elijah", "Oliver", "Ethan", "Amelia", "Mia", "Zander", "Charl", "Johan", "Zoe"
  ];
  
  const actions = ["Deposited", "Withdrawn"];
  const totalEntries = 3840;

  function generateDailyTransactions() {
    const transactions = [];
    const usedNames = new Set();

    for (let i = 0; i < totalEntries; i++) {
      let name;
      do {
        name = names[Math.floor(Math.random() * names.length)];
      } while (usedNames.has(name));
      
      usedNames.add(name);

      const action = actions[Math.floor(Math.random() * actions.length)];
      const amount = generateRandomAmount();

      transactions.push({
        name: name,
        action: action,
        amount: `$${amount}`
      });

      if (usedNames.size === names.length) usedNames.clear();
    }
    return transactions;
  }

  function generateRandomAmount() {
    const isSmallAmount = Math.random() < 0.7;
    return isSmallAmount ? (Math.floor(Math.random() * 200) + 10).toLocaleString() : (Math.floor(Math.random() * 19950) + 50).toLocaleString();
  }

  function displayTransactions(transactionBatch) {
    const ticker = document.getElementById("ticker");
    ticker.innerHTML = ""; 

    transactionBatch.forEach(transaction => {
      const tickerItem = document.createElement("div");
      tickerItem.classList.add("ticker-item");
      tickerItem.innerHTML = `
        <span class="item name">${transaction.name}</span> 
        <span class="item action">${transaction.action}</span> 
        <span class="item amount">${transaction.amount}</span>
      `;
      ticker.appendChild(tickerItem);
    });
  }

  const dailyTransactions = generateDailyTransactions();
  const batchDuration = 22500;
  let currentBatchIndex = 0;

  function updateTicker() {
    const nextBatch = dailyTransactions.slice(currentBatchIndex, currentBatchIndex + 5);
    displayTransactions(nextBatch);

    currentBatchIndex = (currentBatchIndex + 5) % dailyTransactions.length;

    setTimeout(updateTicker, batchDuration);
  }

  function startTickerAtCorrectTime() {
    const now = new Date();
    const secondsSinceMidnight = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
    const currentBatchTimeSlot = Math.floor(secondsSinceMidnight / 22.5);
    currentBatchIndex = (currentBatchTimeSlot * 5) % dailyTransactions.length;

    updateTicker();
  }

  startTickerAtCorrectTime();
</script>

<style>
  /* Main ticker container */
  .ticker-container {
    width: 100%;
    max-width: 600px;
    margin: auto;
    background-color: #ffffff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    padding: 15px 0;
  }
  
  /* Header row styling */
  .ticker-header {
    display: flex;
    justify-content: space-between;
    padding: 8px 15px;
    border-bottom: 2px solid #ddd;
    font-family: Arial, sans-serif;
    font-weight: bold;
    font-size: 1.1em;
    color: #333;
    background-color: #f2f2f2;
  }

  /* Header title styling */
  .header-title {
    flex: 1;
    text-align: center;
    color: #444;
  }

  /* Transaction ticker row styling */
  .ticker {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  /* Individual ticker item styling */
  .ticker-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 15px;
    border-bottom: 1px solid #eee;
    font-family: Arial, sans-serif;
    font-size: 1em;
    color: #333;
  }
  
  .item {
    flex: 1;
    text-align: center;
  }
  
  /* Styling for each column */
  .name {
    color: #2e7d32;
    font-weight: bold;
  }
  
  .action {
    color: #0288d1;
    font-style: italic;
  }
  
  .amount {
    color: #d32f2f;
    font-weight: bold;
  }

  /* Frame styling */
  .ticker-container {
    background-color: #fbfbfb;
    border-radius: 10px;
    overflow: hidden;
  }
</style>
